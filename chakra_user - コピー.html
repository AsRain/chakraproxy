<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>チャット</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      height: 2000px; /* 適当な高さのコンテンツを追加 */
    }    
  </style>
</head>
<body>

  <h2>チャット</h2>
  <p>自動更新は入力する際以外は 有効にしてください。 (入力する際はチェックを外してください)</p>
  <label for="refreshToggle">自動更新</label>
  <input type="checkbox" id="refreshToggle" onchange="toggleRefresh()" checked> <!-- トグル用のチェックボックス -->

  <script>
    var refreshInterval; // インターバル用の変数
    var checkbox = document.getElementById('refreshToggle');

    // ローカルストレージから状態を取得
    var isChecked = localStorage.getItem('autoRefresh') === 'true';
    checkbox.checked = isChecked;

    // スクロール位置をセッションストレージから取得
    var scrollPosition = sessionStorage.getItem('scrollPosition') || 0;

    // ページ読み込み時にスクロール位置を復元
    window.scrollTo(0, scrollPosition);

    function toggleRefresh() {
      isChecked = checkbox.checked;
      localStorage.setItem('autoRefresh', isChecked);

      if (isChecked) {
        // チェックされている場合は3秒ごとにリロードするインターバルを設定
        refreshInterval = setInterval(function() {
          // 現在のスクロール位置をセッションストレージに保存
          sessionStorage.setItem('scrollPosition', window.scrollY);
          location.reload();
        }, 5000);
      } else {
        // チェックが外れている場合はインターバルをクリア
        clearInterval(refreshInterval);
      }
    }

    // ページ読み込み時に初期設定を反映
    toggleRefresh();
  </script>

</body>
</html>


<!-- customize labels of htmlcommentbox.com -->
<script>
    // This code goes ABOVE the main HTML Comment Box code!
    // replace the text in the single quotes below to customize labels.
    hcb_user = {
        comments_header : '　',
        name_label : 'お名前',
        content_label: 'テキストを入力...',
        submit : 'コメントする',
        logout_link : '',
        admin_link : '',
        no_comments_msg: '',
        add:'コメントを追加する',
        again:'さらにコメントを入力する',
        rss:'',
        said:'さんのコメント',
        prev_page:'<img src="//www.htmlcommentbox.com/static/images/arrow_left.png" class="hcb-icon" title="previous page" alt="[prev]"/>',
        next_page:'<img src="//www.htmlcommentbox.com/static/images/arrow_right.png" class="hcb-icon" title="next page" alt="[next]"/>',
        showing:'Showing',
        to:'to',
        website_label:'website (optional)',
        email_label:'email',
        anonymous:'名無しさん',
        mod_label:'(管理人)',
        subscribe:'email me replies',
        are_you_sure:'Do you want to flag this comment as inappropriate?',
      
        reply:'<img src="//www.htmlcommentbox.com/static/images/reply.png"/> 返信',
        flag:'',
        like:'<img src="//www.htmlcommentbox.com/static/images/like.png"/> いいね',
      
        //dates
        days_ago:'日前',
        hours_ago:'時間前',
        minutes_ago:'分前',
        within_the_last_minute:'数秒前',
      
        msg_thankyou:'送信されました',
        msg_approval:'このコメントは許可され次第反映されます',
        msg_approval_required:'送信されました',
      
        err_bad_html:'Your comment contained bad html.',
        err_bad_email:'Please enter a valid email address.',
        err_too_frequent:'You must wait a few seconds between posting comments.',
        err_comment_empty:'Your comment was not posted because it was empty!',
        err_denied:'Your comment was not accepted.',
      
        //SETTINGS
        MAX_CHARS: 8192,
        PAGE:'', // ID of the webpage to show comments for. defaults to the webpage the user is currently visiting.
        RELATIVE_DATES:true // show dates in the form "X hours ago." etc.
    };
    </script>
    <!- done customizing labels of htmlcommentbox.com -->

<!-- begin wwww.htmlcommentbox.com -->
<link rel="stylesheet" type="text/css" href="https://www.htmlcommentbox.com/static/skins/bootstrap/twitter-bootstrap.css" />
<div id="HCB_comment_box"><a href="http://www.htmlcommentbox.com">Widget</a> is loading comments...</div>
<link rel="stylesheet" type="text/css" href="https://www.htmlcommentbox.com/static/skins/bootstrap/twitter-bootstrap.css?v=0" />
<script type="text/javascript" id="hcb"> /*<!--*/ if(!window.hcb_user){hcb_user={};} (function(){var s=document.createElement("script"), l=hcb_user.PAGE || (""+window.location).replace(/'/g,"%27"), h="https://www.htmlcommentbox.com";s.setAttribute("type","text/javascript");s.setAttribute("src", h+"/jread?page="+encodeURIComponent(l).replace("+","%2B")+"&mod=%241%24wq1rdBcg%24nSBNqrIViX%2FE61Eo1nH850"+"&opts=16798&num=10&ts=1701512635159");if (typeof s!="undefined") document.getElementsByTagName("head")[0].appendChild(s);})(); /*-->*/ </script>
<!-- end www.htmlcommentbox.com -->
